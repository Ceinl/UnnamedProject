<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Scene Studio</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,400;9..144,600;9..144,700&family=IBM+Plex+Mono:wght@400;600&family=Spline+Sans:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="app">
      <div id="projectSelector" class="modal is-visible">
        <div class="modal-card">
          <h1>Connect a Project</h1>
          <p>Select the root directory that contains <span>content/scenes/</span>.</p>
          <div class="field">
            <label for="projectPathInput">Project Path</label>
            <input id="projectPathInput" type="text" placeholder="/Users/you/projects/my-game" />
          </div>
          <div class="modal-actions">
            <button id="projectSelectButton" class="primary">Load Project</button>
          </div>
          <span id="projectStatus" class="muted">Waiting for input</span>
        </div>
      </div>

      <div id="newSceneModal" class="modal">
        <div class="modal-card">
          <h1>Create Scene</h1>
          <p>Start with a clean canvas and lay out your world.</p>
          <div class="field">
            <label for="newSceneId">Scene ID</label>
            <input id="newSceneId" type="text" placeholder="forest_level_01" />
          </div>
          <div class="field">
            <label for="newSceneName">Scene Name</label>
            <input id="newSceneName" type="text" placeholder="Forest Level" />
          </div>
          <div class="field-row">
            <div class="field">
              <label for="newSceneWidth">Width</label>
              <input id="newSceneWidth" type="number" min="256" value="3200" />
            </div>
            <div class="field">
              <label for="newSceneHeight">Height</label>
              <input id="newSceneHeight" type="number" min="256" value="1800" />
            </div>
          </div>
          <div class="modal-actions">
            <button id="cancelNewSceneButton" class="ghost">Cancel</button>
            <button id="createSceneButton" class="primary">Create Scene</button>
          </div>
        </div>
      </div>

      <header class="topbar">
        <div class="brand">
          <div class="brand-title">Scene Studio</div>
          <div id="sceneName" class="brand-subtitle">No scene loaded</div>
        </div>
        <div class="topbar-center">
          <div class="field-inline">
            <label for="sceneSelect">Scene</label>
            <select id="sceneSelect"></select>
          </div>
          <button id="newSceneButton" class="primary">New Scene</button>
        </div>
        <div class="topbar-actions">
          <button id="toggleLeftSidebarButton" class="ghost small">Left</button>
          <button id="toggleRightSidebarButton" class="ghost small">Right</button>
          <button id="toggleFocusModeButton" class="ghost small">Focus</button>
          <button id="saveButton" class="ghost">Save</button>
        </div>
      </header>

      <div id="workspace" class="workspace">
        <aside id="leftSidebar" class="sidebar left">
          <section class="panel tools-panel">
            <div class="panel-header compact">
              <h2>Placement</h2>
              <span id="objectCountBadge" class="tiny-badge">0 objects</span>
            </div>
            <div class="tool-grid">
              <button class="tool-button is-active" data-tool="select">
                <strong>Select</strong>
                <span>Pick and move objects</span>
              </button>
              <button class="tool-button" data-tool="pan">
                <strong>Pan</strong>
                <span>Move camera view</span>
              </button>
              <button class="tool-button" data-tool="place-prop">
                <strong>Prop</strong>
                <span>Place visual objects</span>
              </button>
              <button class="tool-button" data-tool="place-collider">
                <strong>Collider</strong>
                <span>Block and shape movement</span>
              </button>
              <button class="tool-button" data-tool="place-trigger">
                <strong>Trigger</strong>
                <span>Event zone placement</span>
              </button>
              <button class="tool-button" data-tool="place-spawn">
                <strong>Spawn</strong>
                <span>Spawn marker placement</span>
              </button>
              <button class="tool-button" data-tool="place-text">
                <strong>Text</strong>
                <span>Scene text and labels</span>
              </button>
            </div>
            <div class="tool-hint muted">V Select, M Pan, 1-5 Place, Shift keeps placing, Scroll zoom</div>
          </section>

          <section class="panel hierarchy-panel">
            <div class="panel-header">
              <h2>Scene Objects</h2>
              <button id="addObjectButton" class="ghost small">Add</button>
            </div>
            <div class="hierarchy-controls">
              <input id="hierarchySearch" type="search" placeholder="Search by id, name, type" />
              <div class="chip-row" id="hierarchyFilterRow">
                <button class="chip is-active" data-filter="all">All</button>
                <button class="chip" data-filter="prop">Prop</button>
                <button class="chip" data-filter="collider">Collider</button>
                <button class="chip" data-filter="trigger">Trigger</button>
                <button class="chip" data-filter="spawn">Spawn</button>
                <button class="chip" data-filter="text">Text</button>
              </div>
            </div>
            <div id="hierarchyList" class="list muted">No objects yet.</div>
          </section>
        </aside>

        <main class="canvas-shell">
          <div id="canvasToolbar" class="canvas-toolbar">
            <div class="toolbar-group">
              <span class="toolbar-label">Grid</span>
              <button id="toggleGridButton" class="ghost small">On</button>
              <button id="toggleSnapButton" class="ghost small">Snap: On</button>
              <label class="inline-field" for="gridSizeInput">Size</label>
              <input id="gridSizeInput" type="number" min="4" max="256" step="1" value="32" />
            </div>
            <div class="toolbar-group">
              <span class="toolbar-label">View</span>
              <button id="zoomOutButton" class="ghost small">-</button>
              <button id="zoomInButton" class="ghost small">+</button>
              <button id="focusSelectionButton" class="ghost small">Focus Selected</button>
              <button id="fitSceneButton" class="ghost small">Fit Scene</button>
            </div>
          </div>

          <div class="canvas-container">
            <button id="showLeftSidebarButton" class="floating-toggle floating-left hidden" title="Show left panel">
              ‹
            </button>
            <button id="showRightSidebarButton" class="floating-toggle floating-right hidden" title="Show right panel">
              ›
            </button>
            <canvas id="sceneCanvas"></canvas>
            <div id="canvasOverlay" class="canvas-overlay top-left">
              <div id="activeToolBadge" class="badge">Select</div>
              <div id="activeAssetBadge" class="badge secondary">No asset selected</div>
              <div id="snapStateBadge" class="badge tertiary">Snap: On</div>
            </div>
          </div>
        </main>

        <aside id="rightSidebar" class="sidebar right">
          <section class="panel inspector-panel">
            <h2>Inspector</h2>
            <div id="inspectorPanel" class="panel-body muted">Select an object to edit.</div>
          </section>
          <section class="panel asset-panel">
            <div class="panel-header">
              <h2>Library</h2>
              <div class="tab-group">
                <button class="tab is-active" data-tab="images">Images</button>
                <button class="tab" data-tab="scripts">Scripts</button>
              </div>
            </div>
            <div class="panel-body">
              <div id="assetList" class="asset-grid"></div>
              <div id="scriptList" class="script-list hidden"></div>
            </div>
          </section>
        </aside>
      </div>

      <footer class="status-bar">
        <span id="coordinates" class="mono">X: 0, Y: 0</span>
        <span id="zoomLevel" class="mono">100%</span>
        <span id="projectPathLabel" class="muted">No project loaded</span>
        <span id="status">Ready</span>
      </footer>
    </div>

    <script src="app.js"></script>
  </body>
</html>
